//==============================================================================
$(document).ready(function() {

      var query, still, animate;

      //search function activated by on-click
      $('#search-button').on('click', function() {
          console.log("search clicked");

          // Collect user input by grabbing the input form's value via id (#)
          var userInput = $('#gif-selection').val().trim();

          // Change the input to suit the API (ie change spaces to +)
          userInput = userInput.replace(/ /g, "+");

          //var for api url with api key
          var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + userInput + "&api_key=dc6zaTOxFJmzC&limit=10";


          //==============================================================================
          var button = $("<button class='btn btn-primary'>" + userInput + "</button>");
          $("#buttons").append(button);

          //handler to listen for click on the buttons generated by looping through the topics array
          $(document).on('click', '#buttons', function() {
            //clear out all images already present
            $('#gifs').empty();
            //grab value of id within button
            var userInputbtn = $('#gif-selection').val().trim();
            console.log(userInputbtn); //good value check
            //havent yet figured out how to take that userInputbtn value and research for it.
          });

          //==============================================================================
          //Ajax then calls Giphy API and waits until the API returns the call. (.done)
          $.ajax({
            url: queryURL,
            method: 'GET'
          }).done(function(response) {
              //consoles the response from the API
              console.log(response.data);
              //listing giphies
              var gifs = response.data;
              //
              for (var i = 0; i < gifs.length; i++) {
                // After the data from the AJAX request comes back
                // Creating and storing an image tag
                var images = $("<img>");
                //ratings storing
                var ratings = $("<p>");
                // Creating a paragraph tag with the result item's rating
                var p = $("<p>").text("Rating: " + gifs[i].rating);

                // Setting the Image src attribute
                 images.attr("src", gifs[i].images.fixed_height_still.url);
                 images.attr("alt", "gif image");
//============     below is some troubleshooting experiments for the animations.
//this was a tough assignment.
                .attr({
                  //setting intial src to still image
                  'src': response.data[s].images.fixed_height_still.url,
                  //storing still image in attribute named data-still
                  'data-still': response.data[s].images.fixed_height_still.url,
                  //storing animated gif in attribute named data-animate
                  'data-animate': response.data[s].images.fixed_height.url,
                  //storing conditional term to be used later to flip on or off the gif animation
                  'data-state': 'still'
                });
//==============
                // Prepending the Images to the images div
                $("#gifs").prepend(images);
                $("#gifs").prepend(p);
                //==================================================================================
                $("#gifs").on("click", function() {
                  // The attr jQuery method allows us to get or set the value of any attribute on our HTML element
                  var state = $(this).attr("data-state");
                  // If the clicked image's state is still, update its src attribute to what its data-animate value is.
                  // Then, set the image's data-state to animate
                  // Else set src to the data-still value
                  if (state === "still") {
                    $(this).attr("src", $(this).attr("data-animate"));
                    $(this).attr("data-state", "animate");
                  } else {
                    $(this).attr("src", $(this).attr("data-still"));
                    $(this).attr("data-state", "still");
                  }
                });
                //==================================================================================
                //==================================================================================

                // images.on('click')
                //           if ($("#gifs").attr("src", gifs[i].images.fixed_height_still.url)) {
                //              ($("#gifs").attr("src", gifs[i].images.fixed_height.url));
                //            }
                //            else
                //              ($("#gifs").attr("src",gifs[i].images.fixed_height.url)); {
                //              ($("#gifs").attr("src", gifs[i].images.fixed_height_still.url));
                //              }
                           };
                //==============================================================================
                //==============================================================================
                //to clear the page of the search results and buttons............please update.
                $('#clear-results').on('click', function() {
                  $("input[type=text], textarea").val("");
                  $("#gifs").empty();
                  console.log("Clear clicked");
                });
               });
             });
          });

    //==================----------------------------------------------
    //to do
    //create buttons with search query
    //create start and stop
